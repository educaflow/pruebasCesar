<?xml version="1.0"?>
<xml-inputs priority="300" xmlns="http://axelor.com/xml/ns/data-import"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://axelor.com/xml/ns/data-import
  https://axelor.com/xml/ns/data-import/data-import_7.4.xsd">

    <input file="modulos.xml" root="datos">
        <bind node="modulos/modulo" type="com.educaflow.apps.sistemaeducativo.db.Modulo" search="self.code = :code"  create="true">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
        </bind>
    </input>

    <input file="grupos.xml" root="datos">
        <bind node="grupos/grupo" type="com.educaflow.apps.sistemaeducativo.db.Grupo" search="self.code = :code"  create="true">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
            <bind node="modulos/modulo" to="modulos" search="self.code = :code" create="false">
                <bind node="@code" to="code" />
            </bind>
        </bind>
    </input>

    <input file="cursos.xml" root="datos">
        <bind node="cursos/curso" type="com.educaflow.apps.sistemaeducativo.db.Curso" search="self.code = :code"  create="true">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
            <bind node="grupos/grupo" to="grupos" search="self.code = :code" create="false">
                <bind node="@code" to="code" />
            </bind>
        </bind>
    </input>

    <input file="ciclos.xml" root="datos">
        <bind node="ciclos/ciclo" type="com.educaflow.apps.sistemaeducativo.db.Ciclo" search="self.code = :code"  create="true">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
            <bind node="cursos/curso" to="cursos" search="self.code = :code" create="false">
                <bind node="@code" to="code" />
            </bind>
        </bind>
    </input>

    <input file="tiposUsuarios.xml" root="datos">
        <bind node="tiposUsuarios/tipoUsuario" type="com.educaflow.apps.sistemaeducativo.db.TipoUsuario" search="self.code = :code"  create="true">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
        </bind>
    </input>

    <input file="departamentos.xml" root="datos">
        <bind node="departamentos/departamento" type="com.educaflow.apps.sistemaeducativo.db.Departamento" search="self.code = :code"  create="true">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
        </bind>
    </input>

    <input file="centros.xml" root="datos">
        <bind node="centros/centro" type="com.educaflow.apps.sistemaeducativo.db.Centro" search="self.code = :code"  create="true">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
            <bind node="@address" to="address" />
            <bind node="@city" to="city" />
            <bind node="@postalCode" to="postalCode" />
            <bind node="@country" to="country" />
            <bind node="ciclos/ciclo" to="ciclos" search="self.code = :code" create="false">
                <bind node="@code" to="code" />
            </bind>
            <bind node="departamentos/departamento" to="departamentos" search="self.code = :code" create="false">
                <bind node="@code" to="code" />
            </bind>
        </bind>
    </input>

    <input file="usuarios.xml" root="datos">
        <bind node="usuarios/usuario" type="com.axelor.auth.db.User" search="self.code = :code" call="com.axelor.auth.AuthService:encrypt">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
            <bind node="@group" to="group" search="self.code = :group" update="false" />
            <bind node="@password" to="password" />
        </bind>
    </input>

    <input file="cargos.xml" root="datos">
        <bind node="cargos/cargo" type="com.educaflow.apps.sistemaeducativo.db.Cargo" search="self.code = :code"  create="true">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
            <bind node="@centro" to="centro" search="self.code = :code" create="false" >
                <bind node="." to="code"/>
            </bind>
        </bind>
    </input>

    <input file="centroUsuarios.xml" root="datos">
        <bind node="centroUsuarios/centroUsuario"
              type="com.educaflow.apps.sistemaeducativo.db.CentroUsuario"
              search="self.usuario.code = :usuarioCode and self.centro.code = :centroCode and self.tipoUsuario.code = :tipoUsuarioCode"
              create="true">
            <bind node="@usuario" to="usuario" search="self.code = :usuarioCode" create="false">
                <bind node="." to="code" alias="usuarioCode"/>
            </bind>
            <bind node="@centro" to="centro" search="self.code = :centroCode" create="false">
                <bind node="." to="code" alias="centroCode"/>
            </bind>
            <bind node="@tipoUsuario" to="tipoUsuario" search="self.code = :tipoUsuarioCode" create="false">
                <bind node="." to="code" alias="tipoUsuarioCode"/>
            </bind>
            <bind node="departamentos/departamento" to="departamentos" search="self.code = :departamentoCode" create="false">
                <bind node="@code" to="code" alias="departamentoCode"/>
            </bind>
            <bind node="cargos/cargo" to="cargos" search="self.code = :cargoCode" create="false">
                <bind node="@code" to="code" alias="cargoCode"/>
            </bind>
        </bind>
    </input>

</xml-inputs>