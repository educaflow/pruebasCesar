<?xml version="1.0"?>
<xml-inputs priority="300" xmlns="http://axelor.com/xml/ns/data-import"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://axelor.com/xml/ns/data-import
  https://axelor.com/xml/ns/data-import/data-import_7.4.xsd">

    <input file="centros.xml" root="datos">
        <bind node="centros/centro" type="com.educaflow.apps.configuracioncentro.db.Centro" search="self.code = :code"  create="true">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
            <bind node="@address" to="address" />
            <bind node="@city" to="city" />
            <bind node="@postalCode" to="postalCode" />
            <bind node="@country" to="country" />
        </bind>
    </input>

    <input file="cursosAcademicos.xml" root="datos">
        <bind node="cursosAcademicos/cursoAcademico" type="com.educaflow.apps.configuracioncentro.db.CursoAcademico" search="self.code = :code" create="true">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
            <bind node="@centro" to="centro" search="self.code=:centro" update="false" create="false"/>
        </bind>
    </input>

    <input file="departamentos.xml" root="datos">
        <bind node="departamentos/departamento" type="com.educaflow.apps.configuracioncentro.db.Departamento" search="self.code = :code" create="true">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
            <bind node="@centro" to="centro" search="self.code = :centro" update="false" create="false"/>
        </bind>
    </input>

    <input file="usuarios.xml" root="datos">
        <bind node="usuarios/usuario" type="com.axelor.auth.db.User" create="true" search="self.code = :code" call="com.axelor.auth.AuthService:encrypt">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
            <bind node="@password" to="password" />
            <bind node="@group" to="group" search="self.code = :group" update="false" create="false"/>
            <bind node="@centroActivo" to="centroActivo" search="self.code = :centroActivo" update="false" create="false"/>
        </bind>
    </input>

    <input file="cursoAcademicoDepartamentos.xml" root="datos">
        <bind node="cursoAcademicoDepartamentos/cursoAcademicoDepartamento"
              type="com.educaflow.apps.configuracioncentro.db.CursoAcademicoDepartamento"
              search="self.cursoAcademico.code = :cursoAcademico AND self.departamento.code = :departamento"
              create="true">
            <bind node="@cursoAcademico" to="cursoAcademico" search="self.code = :cursoAcademico" create="false"/>
            <bind node="@departamento" to="departamento" search="self.code = :departamento" create="false"/>
        </bind>
    </input>

    <!-- Curso acadÃ©mico actual de los centros -->
    <input file="cursoAcademicoActualCentro.xml" root="datos">
        <bind node="centros/centro" type="com.educaflow.apps.configuracioncentro.db.Centro" search="self.code = :code" update="true" create="false">
            <bind node="@code" to="code" />
            <bind node="@cursoAcademicoActual" to="cursoAcademicoActual" search="self.code = :cursoAcademicoActual" />
        </bind>
    </input>

    <input file="cursoAcademicoDepartamentosUsuarios.xml" root="datos">
        <bind node="cursoAcademicoDepartamentosUsuarios/cursoAcademicoDepartamentoUsuario"
              type="com.educaflow.apps.configuracioncentro.db.CursoAcademicoDepartamentoUsuario"
              search="self.cursoAcademicoDepartamento.cursoAcademico.code = :cursoAcademico
              AND self.cursoAcademicoDepartamento.departamento.code = :departamento
              AND self.usuario.code = :usuario"
              create="true">
            <bind node="@usuario" to="usuario" search="self.code = :usuario" create="false"/>

            <bind node="cursoAcademicoDepartamento"
                  to="cursoAcademicoDepartamento"
                  search="self.cursoAcademico.code = :cursoAcademico AND self.departamento.code = :departamento"
                  create="false">
                <bind node="@cursoAcademico" to="cursoAcademico" search="self.code = :cursoAcademico" create="false"/>
                <bind node="@departamento" to="departamento" search="self.code = :departamento" create="false"/>
            </bind>

        </bind>
    </input>



</xml-inputs>