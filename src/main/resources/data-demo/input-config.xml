<?xml version="1.0"?>
<xml-inputs priority="300" xmlns="http://axelor.com/xml/ns/data-import"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://axelor.com/xml/ns/data-import
  https://axelor.com/xml/ns/data-import/data-import_7.4.xsd">

    <input file="centros.xml" root="datos">
        <bind node="centros/centro" type="com.educaflow.apps.configuracioncentro.db.Centro" search="self.code = :code"  create="true">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
            <bind node="@address" to="address" />
            <bind node="@city" to="city" />
            <bind node="@postalCode" to="postalCode" />
            <bind node="@country" to="country" />
        </bind>
    </input>

    <input file="usuarios.xml" root="datos">
        <bind node="usuarios/usuario" type="com.axelor.auth.db.User" create="true" search="self.code = :code" call="com.axelor.auth.AuthService:encrypt">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
            <bind node="@password" to="password" />
            <bind node="@group" to="group" search="self.code = :group" update="false" create="false"/>
            <bind node="@centroActivo" to="centroActivo" search="self.code = :centroActivo" update="false" create="false"/>
        </bind>
    </input>

    <input file="centroUsuarios.xml" root="datos">
        <bind node="centroUsuarios/centroUsuario" type="com.educaflow.apps.configuracioncentro.db.CentroUsuario" search="self.centro.code = :centro AND self.usuario.code = :usuario" create="true">
            <bind node="@centro" to="centro" search="self.code = :centro" create="false"/>
            <bind node="@usuario" to="usuario" search="self.code = :usuario" create="false"/>
            <bind node="@tipoUsuario" to="tipoUsuario" search="self.code = :tipoUsuario" update="false" create="false"/>
        </bind>
    </input>

    <input file="cursosAcademicos.xml" root="datos">
        <bind node="cursosAcademicos/cursoAcademico" type="com.educaflow.apps.configuracioncentro.db.CursoAcademico" search="self.code = :code" create="true">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
            <bind node="@centro" to="centro" search="self.code=:centro" update="false" create="false"/>
        </bind>
    </input>

    <!-- Curso acadÃ©mico actual de los centros -->
    <input file="cursoAcademicoActualCentro.xml" root="datos">
        <bind node="centros/centro" type="com.educaflow.apps.configuracioncentro.db.Centro" search="self.code = :code" update="true" create="false">
            <bind node="@code" to="code" />
            <bind node="@cursoAcademicoActual" to="cursoAcademicoActual" search="self.code = :cursoAcademicoActual" />
        </bind>
    </input>

    <input file="departamentos.xml" root="datos">
        <bind node="departamentos/departamento" type="com.educaflow.apps.configuracioncentro.db.Departamento" search="self.code = :code" create="true">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
            <bind node="@centro" to="centro" search="self.code = :centro" update="false" create="false"/>
            <bind node="@familiaProfesional" to="familiaProfesional" search="self.code = :familiaProfesional" update="false" create="false"/>
            <bind node="@tipoDepartamento" to="tipoDepartamento" search="self.code = :tipoDepartamento" update="false" create="false"/>
        </bind>
    </input>

    <input file="cargos.xml" root="datos">
        <bind node="cargos/cargo" type="com.educaflow.apps.configuracioncentro.db.Cargo" search="self.code = :code" create="true">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
            <bind node="@centro" to="centro" search="self.code = :centro" update="false" create="false"/>
            <bind node="@tipoUsuario" to="tipoUsuario" search="self.code = :tipoUsuario" update="false" create="false"/>
            <bind node="@adminCentro" to="adminCentro"/>
        </bind>
    </input>

    <input file="grupos.xml" root="datos">
        <bind node="grupos/grupo" type="com.educaflow.apps.configuracioncentro.db.Grupo" search="self.code = :code" create="true">
            <bind node="@code" to="code" />
            <bind node="@name" to="name" />
            <bind node="@centro" to="centro" search="self.code = :centro" update="false" create="false"/>
            <bind node="@tipoGrupo" to="tipoGrupo" search="self.code = :tipoGrupo" update="false" create="false"/>
        </bind>
    </input>


    <input file="cursoAcademicoCentroUsuarios.xml" root="datos">
        <bind node="cursoAcademicoCentroUsuarios/cursoAcademicoCentroUsuario"
              type="com.educaflow.apps.configuracioncentro.db.CursoAcademicoCentroUsuario"
              search="self.cursoAcademico.code = :cursoAcademico AND self.centroUsuario.centro = :centro AND self.centroUsuario.usuario.code = :usuario"
              create="true">
            <bind node="@cursoAcademico" to="cursoAcademico" search="self.code = :cursoAcademico" create="false"/>

            <bind node="centroUsuario"
                  to="centroUsuario"
                  search="self.centro.code = :centro AND self.usuario.code = :usuario"
                  create="false">
                <bind node="@centro" to="centro" search="self.code = :centro" create="false"/>
                <bind node="@usuario" to="usuario" search="self.code = :usuario" create="false"/>
            </bind>

        </bind>
    </input>

    <input file="cursoAcademicoDepartamentos.xml" root="datos">
        <bind node="cursoAcademicoDepartamentos/cursoAcademicoDepartamento"
              type="com.educaflow.apps.configuracioncentro.db.CursoAcademicoDepartamento"
              search="self.cursoAcademico.code = :cursoAcademico AND self.departamento.code = :departamento"
              create="true">
            <bind node="@cursoAcademico" to="cursoAcademico" search="self.code = :cursoAcademico" create="false"/>
            <bind node="@departamento" to="departamento" search="self.code = :departamento" create="false"/>
            <bind node="@jefeDepartamento" to="jefeDepartamento" search="self.code = :jefeDepartamento" update="false" create="false"/>
        </bind>
    </input>

    <input file="cursoAcademicoCargos.xml" root="datos">
        <bind node="cursoAcademicoCargos/cursoAcademicoCargo"
              type="com.educaflow.apps.configuracioncentro.db.CursoAcademicoCargo"
              search="self.cursoAcademico.code = :cursoAcademico AND self.cargo.code = :cargo"
              create="true">
            <bind node="@cursoAcademico" to="cursoAcademico" search="self.code = :cursoAcademico" create="false"/>
            <bind node="@cargo" to="cargo" search="self.code = :cargo" create="false"/>
        </bind>
    </input>


    <input file="cursoAcademicoGrupos.xml" root="datos">
        <bind node="cursoAcademicoGrupos/cursoAcademicoGrupo"
              type="com.educaflow.apps.configuracioncentro.db.CursoAcademicoGrupo"
              search="self.cursoAcademico.code = :cursoAcademico AND self.grupo.code = :grupo"
              create="true">
            <bind node="@cursoAcademico" to="cursoAcademico" search="self.code = :cursoAcademico" create="false"/>
            <bind node="@grupo" to="grupo" search="self.code = :grupo" create="false"/>
            <bind node="@curso" to="curso" search="self.code = :curso" create="false"/>
            <bind node="@tutor" to="tutor" search="self.code = :tutor" update="false" create="false"/>
            <bind node="@delegado" to="delegado" search="self.code = :delegado" update="false" create="false"/>
            <bind node="@subdelegado" to="subdelegado" search="self.code = :subdelegado" update="false" create="false"/>
        </bind>
    </input>

    <input file="cursoAcademicoCentroUsuarioCursoAcademicoCargos.xml" root="datos">
        <bind node="cursoAcademicoCentroUsuarioCursoAcademicoCargos/cursoAcademicoCentroUsuarioCursoAcademicoCargo"
              type="com.educaflow.apps.configuracioncentro.db.CursoAcademicoCentroUsuarioCursoAcademicoCargo"
              search="self.cursoAcademicoCentroUsuario.cursoAcademico.code = :cursoAcademico
              AND self.cursoAcademicoCentroUsuario.centroUsuario.centro.code = :centro
              AND self.cursoAcademicoCentroUsuario.centroUsuario.usuario.code = :usuario
              AND self.cursoAcademicoCargo.cursoAcademico.code = :cursoAcademico
              AND self.cursoAcademicoCargo.cargo.code = :cargo"
              create="true">
            <bind node="@cursoAcademico" to="cursoAcademicoCentroUsuario.cursoAcademico" search="self.code = :cursoAcademico" create="false"/>
            <bind node="centroUsuario"
                  to="cursoAcademicoCentroUsuario"
                  search="self.cursoAcademico.code = :cursoAcademico
                  AND self.centroUsuario.centro.code = :centro
                  AND self.centroUsuario.usuario.code = :usuario"
                  create="false">
                <bind node="@centro" to="centro" search="self.code = :centro" create="false"/>
                <bind node="@usuario" to="usuario" search="self.code = :usuario" create="false"/>
                <bind node="../@cursoAcademico" to="cursoAcademico" search="self.code = :cursoAcademico" create="false"/>
            </bind>
            <bind node="cargo"
                  search="self.cursoAcademico.code = :cursoAcademico AND self.cargo.code = :cargo"
                  to="cursoAcademicoCargo"
                  create="false">
                <bind node="@code" to="cargo" search="self.code = :cargo" create="false"/>
                <bind node="../@cursoAcademico" to="cursoAcademico" search="self.code = :cursoAcademico" create="false"/>
            </bind>
        </bind>
    </input>

</xml-inputs>